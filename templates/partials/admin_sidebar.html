<!-- Pulsante hamburger (solo mobile) -->
<button class="btn btn-primary d-lg-none m-3" 
        type="button" 
        data-bs-toggle="offcanvas" 
        data-bs-target="#sidebar" 
        aria-controls="sidebar">
  <i class="bi bi-list fs-4"></i>
</button>

<!-- Sidebar unificata -->
<div class="offcanvas-lg offcanvas-start" tabindex="-1" id="sidebar" aria-labelledby="sidebarLabel">
  <!-- Header mobile -->
  <div class="offcanvas-header d-lg-none">
    <h5 class="offcanvas-title" id="sidebarLabel">üèÅ ZRL Manager</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Chiudi"></button>
  </div>

  <div class="offcanvas-body p-3 d-flex flex-column" style="background: #f8f9fa; min-height: 100vh;">
    <!-- Logo -->
    <div class="sidebar logo d-none d-lg-block mb-4 text-center fw-bold fs-5">üèÅ ZRL Manager</div>

    <!-- Link di navigazione -->
    <nav class="nav-links nav flex-column">
      <!-- DASHBOARD -->
      <a href="{{ url_for('admin_panel.admin_dashboard') }}" 
         class="nav-link {% if request.endpoint == 'admin_panel.admin_dashboard' %}active{% endif %}">
        <i class="bi bi-bar-chart-fill me-2"></i> Dashboard
      </a>

      <!-- IMPORTAZIONI -->
      <div class="nav-item mt-2">
        <a class="nav-link d-flex justify-content-between align-items-center collapsed" 
           data-bs-toggle="collapse" href="#importCollapse" role="button" aria-expanded="false" aria-controls="importCollapse">
          <span><i class="bi bi-arrow-repeat me-2"></i> Importazioni</span>
          <i class="bi bi-chevron-down small"></i>
        </a>
        <div class="collapse" id="importCollapse">
          <div class="nav flex-column ms-3">
            <a href="{{ url_for('admin_import_riders.import_zrl_riders') }}" class="nav-link py-1">Rider ZRL</a>
            <a href="{{ url_for('import_wtrl.import_wtrl_races') }}" class="nav-link py-1">Gare WTRL</a>
          </div>
        </div>
      </div>

      <!-- STAGIONI & ROUND -->
      <a href="{{ url_for('admin_races.import_races') }}" 
         class="nav-link mt-2" style="background-color:#e8f5e9; color:#2e7d32;">
        <i class="bi bi-calendar-range me-2"></i> Stagioni & Round
      </a>

      <!-- GARE -->
      <div class="nav-item mt-2">
        <a class="nav-link d-flex justify-content-between align-items-center collapsed" 
           data-bs-toggle="collapse" href="#racesCollapse" role="button" aria-expanded="false" aria-controls="racesCollapse"
           style="background-color:#fff3e0; color:#ef6c00;">
          <span><i class="bi bi-people-fill me-2"></i> Gare</span>
          <i class="bi bi-chevron-down small"></i>
        </a>
        <div class="collapse" id="racesCollapse">
          <div class="nav flex-column ms-3">
            <a href="{{ url_for('admin_races.manage_captains') }}" class="nav-link py-1">Gestione Capitani</a>
          </div>
        </div>
      </div>

      <!-- TEAM -->
      <a href="{{ url_for('admin_teams.manage_teams') }}" 
         class="nav-link mt-2" style="background-color:#ede7f6; color:#512da8;">
        <i class="bi bi-people me-2"></i> Team
      </a>

      <!-- LEAGUES -->
      <a href="{{ url_for('admin_leagues.manage_leagues') }}" 
         class="nav-link mt-2" style="background-color:#fffde7; color:#f9a825;">
        <i class="bi bi-trophy me-2"></i> Leagues
      </a>

      <!-- REPORT -->
      <a href="{{ url_for('admin_reports.index') }}" 
         class="nav-link mt-2 {% if 'admin_reports' in request.endpoint %}active{% endif %}">
        <i class="bi bi-file-earmark-bar-graph me-2"></i> Report
      </a>

      <hr class="my-2">

      <!-- LOGOUT -->
      <a href="{{ url_for('auth.logout') }}" class="nav-link text-white" style="background-color:#d32f2f;">
        <i class="bi bi-box-arrow-right me-2"></i> Logout
      </a>
    </nav>
  </div>
</div>

<!-- CSS -->
<style>
/* Sidebar link hover / active */
.nav-links a {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 10px 12px;
  font-weight: 500;
  color: #212529;
  text-decoration: none;
  border-radius: 6px;
  transition: all 0.2s ease;
}

.nav-links a:hover,
.nav-links a.active {
  color: #fff;
  background-color: #374151;
}

/* Sidebar logo */
.sidebar.logo {
  font-size: 1.5rem;
  font-weight: 600;
  margin-bottom: 30px;
  text-align: center;
}

/* Desktop: sidebar fissa e contenuto spostato */
@media (min-width: 992px) {
  .offcanvas-lg {
    position: fixed !important;
    top: 0;
    left: 0;
    width: 240px;
    height: 100vh;
    transform: none !important;
    visibility: visible !important;
    border-right: 1px solid #dee2e6;
    background-color: #f8f9fa;
    z-index: 1000;
  }
  .main-content {
    margin-left: 240px; /* sposta contenuto solo su desktop */
  }
}

/* Mobile: nessun margine extra */
@media (max-width: 991px) {
  .main-content {
    margin-left: 0;
    width: 100%;
  }
}
</style>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
